# 部屋管理システムについて
## 開発環境
この1個上の階層にvenvというvenv（Python3.9）を作成。requirements.txtのやつがインストールされている。
local_setting.pyなるファイルが存在。settings.txtのDEBUGをTrueに変更すること。
また、staticfilesを生成するのは、opencmd.batで場所を開く→python manage.py collectstaticというコマンド

## 使い方
まず、
（開発環境のリンク、<lnk>とおく）
にアクセスしてください
すると、ログインページに飛ばされると思います。（ちなみにどのページにアクセスしてもログインページに飛ばされます）

アカウント（3種類）
User_name:admin（adminページにもアクセスできるsuperuser）
pass:
User_name:staff
pass:
User_name:student
pass:
（データベースリセットを行ってパスワードをユーザーごと消してください）

ログイン後、最初のリンクにもう一回アクセスし直せば目的のページに移動できます。

アカウント切り替え/ログアウトしたい時は予約ページの右上または中央上の"ログアウト"からできます。

- 予約ページ
部屋予約および認証を行います。user_nameがstaffまたはadminならば認証ができます。

- 警備ページ
当日、部屋の鍵を管理するためのフォームです。user_nameがstaffまたはadminならばアクセスできます。

- 管理者ページ
データベースを操作するためのフォームです。userがadmin(superuser)ならばアクセスできます。

## リンクについての詳細説明
※ /○○… となっているリンクは<lnk>/○○…の意味です。また、<str:hogehoge>はここにstr型（文字列）が入る（intなら数字）ということを表しています。
- 普段使いする時
/ にアクセスしてもらえればアクセス日で開きます。その後、カレンダーの月変更を選択するとに、カレンダーそのものの日付を押すと/month/<int:year>/<int:month>/<int:day>/all/になります。
また、絞り込みを設定すると最後が/all/から部屋idをアンダーバーで繋いだもの（<str:roomFilter>）に変わります。
また、"Y年m月d日の予定"の中で、作成されている予定をクリックすると右または下の新規作成フォームが予定を削除（staffかadminならば承認も）するフォームに切り替わり、リンクは/scheduleid/<int:scheduleid>/<str:roomFilter>/になります。
- 先生に送る時
入力後のスケジュール選択リンクが便利です。filter設定も適用されるのでそれを適切に設定して送ると他の日程の承認もやりやすくなります。
- 警備ページにアクセスする方は
/security/ にアクセスしてください。当日のデータになります。カレンダーの日付を押せばその日のデータが見れるリンクが開きます。予約ページからは行けないので直接打ってください。
- 管理者ページにアクセスする時
/admin/ にアクセスしてください。予約ページからは行けないので直接打ってください。

## 管理者ページについての詳細説明
Area 高校校舎など
Room 予備教室Aなど
Schedule 部屋借りデータ
event 運動会など
グループ デフォルトでついている。使っていない。
ユーザー ユーザーを管理する
- 新しく部屋が使えるようになった時
必要なareaがなければ新しくareaを作ってください。
- 新しくareaが使えるようになった時
Areaの追加から追加します。
- 部屋が（永久的に）使えなくなった時
roomのIsAvailableのチェックボックスを外して保存してください
- Areaが（永久的に）使えなくなった時
部屋が使えなくなった時の動作をしてから（逆の順番にはできません）areaのIsAvailableのチェックボックスを外して保存してください
- ユーザー名を変えたくなった時
絶対にユーザー名を変えないでください。アクセスできるかをユーザー名で認証しています。ユーザーの欄からパスワードは変更できます。
- 年のはじめ
eventから年間行事を設定してください。なくても動作します。
